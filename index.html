<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GenÃ§ Gross Mobil Terminal</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <link rel="icon" sizes="192x192" href="icon-192.png">
  <link rel="icon" sizes="512x512" href="icon-512.png">
  <meta name="theme-color" content="#0a2bff"/>

  <style>
    :root{
      --bg:#0b1220; --card:#101a2e; --text:#fff; --muted:#9cb0d2;
      --blue:#0a2bff; --orange:#ff6a00; --ok:#16c47f; --warn:#ff4d4f
    }
    *{box-sizing:border-box} body{margin:0;font-family:system-ui;background:var(--bg);color:var(--text)}
    header{background:linear-gradient(90deg,var(--orange),var(--blue));
      padding:14px 10px; text-align:center; font-weight:700; letter-spacing:.3px}
    header span{background:#00000022;padding:6px 10px;border-radius:10px}
    .wrap{max-width:900px;margin:auto;padding:10px}
    .card{background:var(--card);border-radius:14px;padding:12px;margin:10px 0}
    h3{margin:4px 0 10px 0}
    .row{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
    select,input,button{border-radius:10px;border:1px solid #22325b;background:#0f1a31;color:var(--text);padding:10px}
    input::placeholder{color:#6f83ad}
    button{cursor:pointer;border:none}
    .primary{background:var(--blue)} .good{background:var(--ok)} .warn{background:var(--warn)}
    .chip{display:inline-block;background:#0f1d38;border:1px solid #20355f;color:var(--muted);
      border-radius:999px;padding:3px 9px;font-size:12px;margin-right:6px}
    .videoBox{position:relative;background:#000;border-radius:12px;overflow:hidden}
    video{display:block;width:100%;max-height:320px}
    .roi{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none}
    .roi:after{content:"";width:70%;height:32%;border:2px solid #fff;border-radius:10px;
      box-shadow:0 0 0 200vmax rgba(0,0,0,.45) inset}
    table{width:100%;border-collapse:collapse;margin-top:10px}
    th,td{border-bottom:1px solid #22325b;padding:8px}
    th{color:#9cb0d2;text-align:left} .right{text-align:right}
    .mini{padding:8px 10px}
    .badge{font-weight:700;color:var(--orange)}
    a.link{color:#9cb0d2}
  </style>
</head>
<body>

<header><span>GENÃ‡ GROSS â€¢ MOBÄ°L TERMINAL</span></header>
<div class="wrap">

  <!-- KAMERA -->
  <div class="card">
    <div class="row">
      <label for="cameraSelect">Kamera:</label>
      <select id="cameraSelect" class="mini"></select>
      <button id="btnStart" class="primary">KamerayÄ± BaÅŸlat</button>
      <button id="btnStop">Durdur</button>
      <button id="btnSingle" style="background:var(--orange)">ðŸ‘‰ Tek Okut</button>
    </div>
    <div class="videoBox" style="margin-top:8px">
      <video id="video" playsinline autoplay muted></video>
      <div class="roi"></div>
    </div>
    <div style="margin-top:8px">
      <span id="st" class="chip">HazÄ±r</span>
      <span id="eng" class="chip">Motor: BarcodeDetector</span>
      <span id="fps" class="chip">FPS: -</span>
    </div>
    <div class="chip">Ä°pucu: Barkodu kutunun iÃ§inde, 15â€“25 cm mesafe, iyi Ä±ÅŸÄ±k.</div>
  </div>

  <!-- GÄ°RÄ°Åž / EKLEME -->
  <div class="card">
    <h3>Barkod & Adet</h3>
    <div class="row">
      <input id="barcode" inputmode="numeric" pattern="[0-9]*" type="tel"
             placeholder="Barkod" style="flex:1;min-width:220px">
      <button id="btnClearBarcode" class="mini">Temizle</button>
    </div>
    <div class="row" style="margin-top:6px">
      <button id="btnMinus" class="mini">-1</button>
      <input id="qty" type="number" value="1" min="1" style="width:100px">
      <button id="btnPlus" class="mini">+1</button>
      <button id="btnAdd" class="good">Ekle</button>
      <button id="btnUndo">Geri Al</button>
    </div>
    <div style="margin-top:8px">
      ÃœrÃ¼n: <span id="pName" class="badge">â€”</span>
      Â· Fiyat: <span id="pPrice" class="badge">â€”</span>
    </div>
    <div style="margin-top:10px" class="row">
      <label>Dosya AdÄ±:</label>
      <input id="filename" value="sayim" style="width:220px">
      <button id="btnExport" class="primary">TXT Olarak DÄ±ÅŸa Aktar</button>
      <button id="btnCSV">CSV Olarak DÄ±ÅŸa Aktar</button>
      <button id="btnClear" class="warn">Listeyi Temizle</button>
    </div>

    <table>
      <thead>
        <tr><th>Barkod</th><th>Ä°sim</th><th class="right">Adet</th><th></th></tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
    <div style="margin-top:6px">Toplam satÄ±r: <span id="totalRows">0</span> Â· Toplam adet: <span id="totalQty">0</span></div>
  </div>

  <!-- ÃœRÃœN VERÄ°SÄ° -->
  <div class="card">
    <h3>ÃœrÃ¼n Verisi YÃ¼kle (opsiyonel)</h3>
    <div class="chip">GDF/TXT/CSV (ERP Ã§Ä±ktÄ±sÄ±). Format: <code>barkod;isim;fiyat</code> Â· Fiyat virgÃ¼llÃ¼ olabilir (11,90)</div>
    <div class="row" style="margin-top:8px">
      <input id="fileInput" type="file" accept=".txt,.csv,.json,.gdf">
      <button id="btnClearProducts" class="mini">ÃœrÃ¼n Verisini Temizle</button>
      <span class="chip"><span id="productCount">0</span> Ã¼rÃ¼n yÃ¼klÃ¼</span>
    </div>
  </div>

  <audio id="beep" src="beep.ogg" preload="auto"></audio>
</div>

<script src="app.js"></script>
</body>
</html>
